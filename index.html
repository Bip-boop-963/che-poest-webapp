<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ß—ë –ø–æ–µ—Å—Ç—å?</title>
<style>
:root {
  --wheel-size: min(320px, 85vw);
  --pointer-size: 30px;
}

body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #fff8e7;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  height: 100vh;
  overflow: hidden;
}

/* –ó–∞–≥—Ä—É–∑–∫–∞ */
.loader { display: flex; gap: 10px; }
.dot { width: 20px; height: 20px; background: #ffb74d; border-radius: 50%; animation: bounce 0.6s infinite alternate; }
.dot:nth-child(2) { animation-delay: 0.2s; }
.dot:nth-child(3) { animation-delay: 0.4s; }
@keyframes bounce { to { transform: translateY(-20px); background: #ffa726; } }

/* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
#menu-container { display: none; flex-direction: column; align-items: center; width: 100%; padding: 20px; box-sizing: border-box; position: relative; }
.categories { display: flex; gap: 15px; flex-wrap: wrap; justify-content: center; margin-bottom: 20px; }
.category { font-size: 1.4em; padding: 12px 20px; background: #ffebc0; border-radius: 15px; cursor: pointer; transition: transform 0.2s, background 0.2s; user-select: none; border: none; }
.category:hover { transform: scale(1.1); background: #ffd580; }

.dishes { display: none; flex-direction: column; align-items: center; gap: 10px; margin-bottom: 20px; }
.dishes.show { display: flex; }
.dish { font-size: 1.4em; padding: 10px 20px; background: #ffebc0; border-radius: 15px; cursor: pointer; transition: transform 0.2s, background 0.2s; }
.dish:hover { transform: scale(1.1); background: #ffd580; }

#back-button { font-size: 2em; position: fixed; top: 20px; left: 20px; background: #ffebc0; padding: 10px 15px; border-radius: 15px; cursor: pointer; display: none; border: none; z-index: 10; }
#back-button:hover { transform: scale(1.1); background: #ffd580; }

/* –ö–æ–Ω—Ç—Ä–æ–ª—ã */
#controls { display: flex; gap: 20px; margin-bottom: 20px; }
.control-btn { width: 60px; height: 60px; font-size: 2em; display: flex; align-items: center; justify-content: center; background: #ffebc0; border-radius: 15px; border: none; cursor: pointer; transition: background 0.2s; user-select: none; }
.control-btn:hover { background: #ffd580; }
.control-btn:disabled { background: #e0e0e0; cursor: not-allowed; }

/* –°–ø–∏—Å–æ–∫ */
#list-box { display: none; margin-top: 20px; background: #fff2d6; padding: 15px 20px; border-radius: 15px; width: 250px; box-shadow: 0 4px 6px rgba(0,0,0,0.2); position: relative; }
#list-box h2 { text-align: center; margin:0 0 10px; }
#list { list-style-type: none; padding:0; margin:0; display:flex; flex-direction:column; gap:8px; font-size:1.2em; text-align:left; }
#checkout-btn { position: absolute; bottom: 10px; right: 10px; font-size: 2em; border: none; background: transparent; cursor: pointer; }

/* --- –†–£–õ–ï–¢–ö–ê --- */
#wheel-container { display: none; flex-direction: column; align-items: center; justify-content: center; gap: 30px; width: 100%; height: 100%; }
.wheel-wrapper { position: relative; width: var(--wheel-size); aspect-ratio: 1 / 1; max-width: var(--wheel-size); max-height: var(--wheel-size); }

#wheel-pointer {
  width: 0;
  height: 0;
  border-style: solid;
  border-width: var(--pointer-size) 0 var(--pointer-size) var(--pointer-size);
  border-color: transparent transparent transparent #ff4136;
  position: absolute;
  top: 50%;
  left: -10px;
  transform: translateY(-50%);
  z-index: 10;
  filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.3));
}

#wheel {
  width: 100%;
  height: 100%;
  background-image: conic-gradient(red 0deg, blue 360deg);
  border-radius: 50%;
  border: 10px solid #ffd580;
  box-shadow: 0 0 15px rgba(0,0,0,0.3);
  position: relative;
  overflow: hidden;
  transition: transform 5s cubic-bezier(0.15, 0.75, 0.3, 1);
}

.wheel-labels { position: absolute; top:0; left:0; width: 100%; height: 100%; }
.wheel-label-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
.wheel-label-text {
  position: absolute;
  top: 10%;
  left: 50%;
  transform: translateX(-50%) rotate(90deg);
  font-size: 14px;
  font-weight: bold;
  user-select: none;
  color: #444;
  text-shadow: 0 0 2px #fff;
}

#back-roulette { position: fixed; top: 20px; left: 20px; z-index: 20; font-size: 2em; border: none; background: #ffebc0; padding: 10px 15px; border-radius: 15px; cursor: pointer; }
#back-roulette:hover { background: #ffd580; transform: scale(1.1); }
</style>
</head>
<body>

<div class="loader"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>

<div id="menu-container">
  <div class="categories">
    <div class="category" data-category="first">üç≤ –ü–µ—Ä–≤–æ–µ</div>
    <div class="category" data-category="second">ü•ò –í—Ç–æ—Ä–æ–µ</div>
    <div class="category" data-category="salads">ü•ó –°–∞–ª–∞—Ç—ã</div>
    <div class="category" data-category="breakfast">üç≥ –ó–∞–≤—Ç—Ä–∞–∫–∏</div>
    <div class="category" data-category="tea">üç∞ –ö —á–∞—é</div>
  </div>
  <button id="back-button">‚¨ÖÔ∏è</button>
  <div id="dishes-container">
    <div class="dishes" data-category="first"><div class="dish" data-name="üç≤ –ë–æ—Ä—â">üç≤ –ë–æ—Ä—â</div><div class="dish" data-name="üçú –õ–∞–ø—à–∞">üçú –õ–∞–ø—à–∞</div></div>
    <div class="dishes" data-category="second"><div class="dish" data-name="üçõ –ü–ª–æ–≤">üçõ –ü–ª–æ–≤</div><div class="dish" data-name="ü•© –ú—è—Å–æ —Å –∞–Ω–∞–Ω–∞—Å–∞–º–∏">ü•© –ú—è—Å–æ —Å –∞–Ω–∞–Ω–∞—Å–∞–º–∏</div></div>
    <div class="dishes" data-category="salads"><div class="dish" data-name="ü•ó –ü–æ–ª—è–Ω–∫–∞">ü•ó –ü–æ–ª—è–Ω–∫–∞</div></div>
    <div class="dishes" data-category="breakfast"><div class="dish" data-name="üç≥ –Ø–∏—á–Ω–∏—Ü–∞">üç≥ –Ø–∏—á–Ω–∏—Ü–∞</div><div class="dish" data-name="ü•ü –ö–æ–Ω–≤–µ—Ä—Ç–∏–∫–∏">ü•ü –ö–æ–Ω–≤–µ—Ä—Ç–∏–∫–∏</div></div>
    <div class="dishes" data-category="tea"><div class="dish" data-name="üç∞ –ß–∏–∑–∫–µ–π–∫">üç∞ –ß–∏–∑–∫–µ–π–∫</div><div class="dish" data-name="ü•ß –ü–∏—Ä–æ–≥">ü•ß –ü–∏—Ä–æ–≥</div></div>
  </div>
  <div id="controls"><button id="rouletteBtn" class="control-btn">üé≤</button><button id="clear" class="control-btn">üóë</button></div>
  <div id="list-box"><h2>üìù –°–ø–∏—Å–æ–∫</h2><ul id="list"></ul><button id="checkout-btn">üõí</button></div>
</div>

<div id="wheel-container">
  <div class="wheel-wrapper">
    <div id="wheel"><div class="wheel-labels"></div></div>
    <div id="wheel-pointer"></div>
  </div>
  <button id="spinBtn" class="control-btn">üé≤</button>
  <button id="back-roulette">‚¨ÖÔ∏è</button>
</div>

<script>
// –û–ë–©–ê–Ø –õ–û–ì–ò–ö–ê
const categories = document.querySelectorAll('.category'), dishesContainers = document.querySelectorAll('.dishes'), allDishes = document.querySelectorAll('.dish'), cart = document.getElementById('list'), listBox = document.getElementById('list-box'), backButton = document.getElementById('back-button'), checkoutBtn = document.getElementById('checkout-btn');

// –õ–û–ì–ò–ö–ê –†–£–õ–ï–¢–ö–ò
const wheelContainer = document.getElementById('wheel-container'), rouletteBtn = document.getElementById('rouletteBtn'), wheel = document.getElementById('wheel'), wheelLabelsContainer = document.querySelector('.wheel-labels'), spinBtn = document.getElementById('spinBtn'), backRoulette = document.getElementById('back-roulette');
const dishNames = Array.from(allDishes).map(d => d.dataset.name);
const colors = ["#FFDDC1", "#FFFACD", "#D4F0F0", "#F0E68C", "#E6E6FA", "#FFC0CB", "#B0E0E6", "#F5DEB3", "#98FB98", "#F08080", "#ADD8E6", "#FFB6C1"];
let isSpinning = false, currentRotation = 0;

function createWheel() {
  wheelLabelsContainer.innerHTML = '';
  const numItems = dishNames.length, segmentAngle = 360 / numItems;
  let gradientString = 'conic-gradient(';
  dishNames.forEach((name, i) => {
    const color = colors[i % colors.length], startAngle = i * segmentAngle, endAngle = startAngle + segmentAngle;
    gradientString += `${color} ${startAngle}deg ${endAngle}deg, `;
    const labelContainer = document.createElement('div');
    labelContainer.className = 'wheel-label-container';
    const textItem = document.createElement('div');
    textItem.className = 'wheel-label-text';
    textItem.textContent = name.replace(/ /g, "\u00A0");
    
    // --- –ì–õ–ê–í–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï ---
    // CSS rotate() —Å—á–∏—Ç–∞–µ—Ç 0 –≥—Ä–∞–¥—É—Å–æ–≤ —Å–≤–µ—Ä—Ö—É. Conic-gradient - —Å–ø—Ä–∞–≤–∞.
    // –î–æ–±–∞–≤–ª—è–µ–º 90 –≥—Ä–∞–¥—É—Å–æ–≤, —á—Ç–æ–±—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Ö.
    const cssRotateAngle = startAngle + (segmentAngle / 2) + 90;
    labelContainer.style.transform = `rotate(${cssRotateAngle}deg)`;

    labelContainer.appendChild(textItem);
    wheelLabelsContainer.appendChild(labelContainer);
  });
  wheel.style.backgroundImage = gradientString.slice(0, -2);
}
rouletteBtn.addEventListener('click', () => { document.getElementById('menu-container').style.display = 'none'; wheelContainer.style.display = 'flex'; createWheel(); });
backRoulette.addEventListener('click', () => { wheelContainer.style.display = 'none'; document.getElementById('menu-container').style.display = 'flex'; });

spinBtn.addEventListener('click', () => {
  if (isSpinning) return;
  isSpinning = true;
  spinBtn.disabled = true;

  const numItems = dishNames.length;
  const segmentAngle = 360 / numItems;
  
  const winningIndex = Math.floor(Math.random() * numItems);
  const stopAngle = (winningIndex * segmentAngle) + (segmentAngle / 2);
  
  // –£–∫–∞–∑–∞—Ç–µ–ª—å —Å–ª–µ–≤–∞ (180 –≥—Ä–∞–¥—É—Å–æ–≤ –≤ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç, –≥–¥–µ 0 - —Å–ø—Ä–∞–≤–∞)
  const targetPosition = 180;
  
  const normalizedCurrentRotation = (currentRotation % 360 + 360) % 360;
  const rotationNeeded = (targetPosition - stopAngle - normalizedCurrentRotation + 360) % 360;

  const spins = 8;
  const totalRotation = rotationNeeded + (360 * spins);
  
  currentRotation += totalRotation;
  
  wheel.style.transform = `rotate(${currentRotation}deg)`;
  
  wheel.addEventListener('transitionend', () => {
    updateList(dishNames[winningIndex]);
    isSpinning = false;
    spinBtn.disabled = false;
  }, { once: true });
});

// –û–°–¢–ê–õ–¨–ù–û–ô JS
categories.forEach(cat => cat.addEventListener('click', () => { const catName = cat.dataset.category; dishesContainers.forEach(dc => dc.classList.toggle('show', dc.dataset.category === catName)); document.querySelector('.categories').style.display = 'none'; backButton.style.display = 'block'; }));
backButton.addEventListener('click', () => { dishesContainers.forEach(dc => dc.classList.remove('show')); document.querySelector('.categories').style.display = 'flex'; backButton.style.display = 'none'; });
const dishCount = {};
function updateList(name) { dishCount[name] = (dishCount[name] || 0) + 1; cart.innerHTML = ''; for (const [dish, count] of Object.entries(dishCount)) { const li = document.createElement('li'); li.textContent = count > 1 ? `${dish} √ó${count}` : dish; cart.appendChild(li); } listBox.style.display = 'block'; }
allDishes.forEach(dish => dish.addEventListener('click', () => updateList(dish.dataset.name)));
document.getElementById('clear').addEventListener('click', () => { cart.innerHTML = ''; listBox.style.display = 'none'; for (let key in dishCount) delete dishCount[key]; });
checkoutBtn.addEventListener('click', () => { const items = Array.from(document.querySelectorAll('#list li')).map(li => li.textContent); if (items.length === 0) return alert("–°–ø–∏—Å–æ–∫ –ø—É—Å—Ç!"); let noteText = items.map(item => `‚òê ${item}`).join('\n'); prompt("–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–ø–∏—Å–æ–∫ –¥–ª—è –∑–∞–º–µ—Ç–æ–∫:", noteText); });
setTimeout(() => { document.querySelector('.loader').style.display = 'none'; document.getElementById('menu-container').style.display = 'flex'; }, 1000);
</script>
</body>
</html>